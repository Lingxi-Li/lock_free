language: cpp
sudo: true
dist: trusty

matrix:
  include:
    - env: compiler=g++-7       options='-std=c++17 -mcx16 -latomic'
    - env: compiler=clang++-6.0 options='-std=c++17 -mcx16'

before_install:
  - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
  - curl -sSL http://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
  - echo "deb http://apt.llvm.org/trusty/ llvm-toolchain-trusty-6.0 main" | sudo tee -a /etc/apt/sources.list
  - sudo apt-get update -qq
  - sudo apt-get install $compiler -yq

script:
  - $compiler --version
  - mkdir bin
  - $compiler -o bin/unit_test test/unit_test/*.cpp $options
  - bin/unit_test
